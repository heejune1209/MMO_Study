# 화살 #1

현재 스킬이 많지 않기 때문에 GameRoom의 HandleSkill 메서드 안에 단순하게 분기 처리를 하는 방식을 사용하면 되지만 향후 스킬이 많아지게 되면은 스킬이라는 클래스를 따로 빼서 플레이어에 넣는 방식으로 구현하는 것이 조금 더 마땅하다.

플레이어 마다 배운 것과 안배운 스킬이 있기 때문이다.

화살을 어떻게 서버에서 컨트롤을 할까?

Arraw 객체를 생성해서 플레이어 위치와 방향대로 세팅을 해주고 똑같이 화살을 등록시키는 방법이 있다.

여기서 중요하게 고민을 해야할 2가지

화살의 존재를 서버에서도 실시간으로 계산을 해야할까?

실시간 계산한 것을 클라에게도 뿌려줘야하는 것일까?

 

투사체 스킬을 쓴다는 사실만 서버에서 알게 되면은 클라와 서버 모두 똑같이 계산은 할 수가 있다.

서버에서 계산을 하되 클라에 굳이 알려주지 않는다고 하더라도 애니메이션을 맞출 때 클라에서 똑같이 생성한다면 굳이 좌표를 서버에서 맞추지 않는다 하더라도 둘이 얼추 비슷한 화면을 만들어줄 수는 있을 것이다.

이렇게 해도 크게 나쁘지는 않지만 단점은 뒤늦게 해당 방에 들어가서 해당 플레이어가 스킬을 쓴다는 사실을 몰랐더라면 그 화살을 볼 수가 없게 된다.

비트 연산자를 활용해서 데이터 타입을 구분해보자

[........ | ........ | ........ | ........ ]

가장 앞 7비트(총 127가지) : GameObject 타입

남은 24비트 : 아이디 발급

Id에 Object 타입과 실제 Id를 함께 넣어줘서 관리하는 방법 

나중에 화살의 종류가 다양해지면 비트 연산자를 좀더 잘 활용을 해서 ID에 화살의 타입도 잘 보관할 수 있도록 해보자